(this.webpackJsonpspirographer=this.webpackJsonpspirographer||[]).push([[0],{18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(1),n=a.n(s),i=a(8),r=a.n(i),l=(a(18),a(4)),o=a(9),d=a(10),u=a(2),m=a(12),v=a(11),h={randomize:{buttonText:"Random",altStyle:"fa-dice",styles:"btn btn-primary"},add:{buttonText:"Add Curve",altStyle:"fa-plus",styles:"btn btn-primary"},clear:{buttonText:"Clear",altStyle:"fa-times",styles:"btn btn-danger"},save:{buttonText:"Export",altStyle:"fa-save",styles:"btn btn-success"}};var b=function(e){var t=h[e.buttonType],a=t.altStyle,s=t.buttonText,n=t.styles;return Object(c.jsx)("div",{className:"col-3 col-sm-12",children:Object(c.jsxs)("button",{className:n+" w-100 mb-1",onClick:e.callback,children:[Object(c.jsx)("i",{className:"buttonIcon fas fas-hover fa-2x "+a}),Object(c.jsx)("div",{className:"buttonText",children:s})]})})},x=a(3),p={r1:{text:"Radius 1",desc:"Radius of first gear",max:300},r2:{text:"Radius 2",desc:"Radius of second gear",max:300},distance:{text:"Distance",desc:"Distance of drawing point from center of gear",max:300},rotation:{text:"Phase",desc:"Initial rotation of curve",max:360},ppc:{text:"Points",desc:"Points per curve",max:200},animation:{text:"Animation",desc:"Length of time the draw animation lasts",max:60},scale:{text:"Scale %",desc:"Overall scale factor of the curve",max:500},stroke:{text:"Stroke",desc:"Thickness of the curve",max:100}};var j=function(e){var t=Object(s.useState)(e.value),a=Object(x.a)(t,2),n=a[0],i=a[1],r=p[e.type],l=r.text,o=r.desc,d=r.max;function u(t){t.target.value>d&&(t.target.value=d),t.target.value<0&&(t.target.value=0),i(t.target.value),e.callback(e.type,parseInt(t.target.value))}return Object(s.useEffect)((function(){i(e.value),"function"===typeof window.$('[data-toggle="tooltip"]').tooltip&&window.$('[data-toggle="tooltip"]').tooltip()}),[e.value]),Object(c.jsxs)("div",{className:"mb-3 col-3 col-sm-12",children:[Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-xl-7 col-md-12",children:[Object(c.jsx)("label",{htmlFor:e.type+"Input",className:"col-form-label "+(!0===e.disabled?"text-muted":""),children:l}),Object(c.jsx)("i",{className:"p-1 fas fa-info-circle","data-toggle":"tooltip",title:o})]}),Object(c.jsx)("div",{className:"col-xl-5 col-md-12",children:Object(c.jsx)("input",{type:"number",id:e.type+"Input",min:"0",max:d,className:"form-control",onChange:u,value:n,disabled:e.disabled})})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("input",{type:"range",id:e.type+"Range",min:"0",max:d,onChange:u,value:n,disabled:e.disabled})})]})};var y=function(e){function t(t){e.callback(e.type,t.target.id)}return Object(c.jsxs)("div",{className:"col-4 col-sm-12 mt-2",children:[Object(c.jsxs)("div",{className:"custom-control custom-radio custom-control-inline",children:[Object(c.jsx)("input",{type:"radio",id:"epi",name:"curveType",className:"custom-control-input",checked:"epi"===e.value,disabled:e.disabled,onChange:t}),Object(c.jsx)("label",{className:"custom-control-label ms-1",htmlFor:"epi",children:"Epitrochoid"})]}),Object(c.jsxs)("div",{className:"custom-control custom-radio custom-control-inline",children:[Object(c.jsx)("input",{type:"radio",id:"hypo",name:"curveType",className:"custom-control-input",checked:"hypo"===e.value,disabled:e.disabled,onChange:t}),Object(c.jsx)("label",{className:"custom-control-label ms-1",htmlFor:"hypo",children:"Hypotrochoid"})]})]})};var f=function(e){return Object(c.jsx)("div",{class:"col-3 col-sm-12 mt-5",children:Object(c.jsx)("input",{type:"color",id:"curveColor",name:"curveColor",className:"custom-control-input",disabled:e.disabled,value:e.value,onChange:function(t){e.callback(e.type,t.target.value)}})})};function O(e,t){return 0===t?e:O(t,e%t)}function C(){return{r1:Math.floor(300*Math.random())+1,r2:Math.floor(300*Math.random())+1,distance:Math.floor(300*Math.random())+1,rotation:Math.floor(Math.random()*Math.floor(361)),ppc:100,animation:5,animPlaying:!1,curveType:Math.random()<.5?"epi":"hypo",scale:100,color:"#010101",stroke:10,x:0,y:0}}function g(e){var t=e.r1,a=e.r2,c=e.distance,s=e.rotation,n=e.ppc,i=e.curveType,r=e.scale,l=e.x/(r/=100),o=e.y/r;if(0===t||0===a)return"";var d=[],u=2*Math.PI/n,m=n*(a/O(t,a)),v=parseFloat(s)*Math.PI/180,h=t-a,b=t+a,x=h/a,p=h/a;if("hypo"===i){var j={x:l+h*Math.cos(v)+c*Math.cos(v*x),y:o+h*Math.sin(v)-c*Math.sin(v*x)};d.push("M".concat(r*j.x),"".concat(r*j.y));for(var y=0;y<m;y++){v+=u;var f={x:l+h*Math.cos(v)+c*Math.cos(v*x),y:o+h*Math.sin(v)-c*Math.sin(v*x)};d.push("L".concat(r*f.x),"".concat(r*f.y)),j={x:f.x,y:f.y}}}else{var C={x:l+b*Math.cos(v)-c*Math.cos(v*p),y:o+b*Math.sin(v)-c*Math.sin(v*p)};d.push("M".concat(r*C.x),"".concat(r*C.y));for(var g=0;g<m;g++){v+=u;var k={x:l+b*Math.cos(v)-c*Math.cos(v*p),y:o+b*Math.sin(v)-c*Math.sin(v*p)};d.push("L".concat(r*k.x),"".concat(r*k.y)),C={x:k.x,y:k.y}}}return d=d.join(" ")}var k=function(e){var t=0;switch(e.type){case"GCD":t=O(e.params.r1,e.params.r2)}return Object(c.jsx)("div",{children:"".concat(e.type,": ").concat(t)})};var w=function(e){var t,a=/[a-z](-?[0-9.]*)\s(-?[0-9.]*)/gi,n={minx:999999,miny:999999,maxx:-999999,maxy:-999999};do{if(t=a.exec(e.path)){var i=parseFloat(t[1]),r=parseFloat(t[2]);i>n.maxx&&(n.maxx=i),i<n.minx&&(n.minx=i),r>n.maxy&&(n.maxy=r),r<n.miny&&(n.miny=r)}}while(t);var l=Object(s.useState)((function(){return!1})),o=Object(x.a)(l,2),d=o[0],u=o[1],m=Object(s.useState)((function(){return{x:0,y:0}})),v=Object(x.a)(m,2),h=v[0],b=v[1],p=Object(s.useState)((function(){return{x:0,y:0}})),j=Object(x.a)(p,2),y=j[0],f=j[1],O=Object(s.useState)((function(){return null})),C=Object(x.a)(O,2),g=C[0],k=C[1],w=Object(s.useState)((function(){return null})),N=Object(x.a)(w,2),M=N[0],S=N[1];return Object(c.jsx)("div",{className:"spiro position-absolute h-100 w-100",children:Object(c.jsxs)("svg",{className:"overflow-visible h-100 w-100",preserveAspectRatio:"xMidYMid",height:"800",width:"600",viewBox:"-400 -400 800 800",fill:"none",onMouseDown:function(t){b({x:t.clientX,y:t.clientY});var a=document.querySelector("#canvasContainer .spiro:nth-child(".concat(e.selected,")")),c=document.querySelector("#canvasContainer .spiro:nth-child(".concat(e.selected,") svg"));f({x:a.style.left?parseInt(a.style.left,10):0,y:a.style.top?parseInt(a.style.top,10):0});var s=c.createSVGPoint();S(s),s.x=t.clientX,s.y=t.clientY;var n=s.matrixTransform(c.getScreenCTM().inverse());k(n),u(!0)},onMouseMove:function(t){if(d){var a=document.querySelector("#canvasContainer .spiro:nth-child(".concat(e.selected,")")),c={left:"".concat(t.clientX-h.x+y.x,"px"),top:"".concat(t.clientY-h.y+y.y,"px")};Object.assign(a.style,c)}},onMouseUp:function(t){if(d){u(!1);var a=document.querySelector("#canvasContainer .spiro:nth-child(".concat(e.selected,")")),c=document.querySelector("#canvasContainer .spiro:nth-child(".concat(e.selected,") svg")),s=M.matrixTransform(c.getScreenCTM().inverse());e.callback("x",g.x-s.x),e.callback("y",g.y-s.y),a.style=""}},children:[Object(c.jsx)("path",{d:"".concat(e.path),stroke:"".concat(e.color),strokeWidth:"".concat(e.stroke/10)}),Object(c.jsx)("rect",{x:n.minx-1,y:n.miny-1,width:n.maxx-n.minx+1,height:n.maxy-n.miny+1,style:{fill:"none",stroke:"lightblue",strokeWidth:"2px",strokeOpacity:e.active?1:0}})]})})},N={play:{name:"fa-play text-muted",command:"play"},stop:{name:"fa-stop text-muted",command:"stop"},delete:{name:"fa-trash-alt text-danger",command:"delete"}};var M=function(e){var t=N[e.type],a=t.name,s=t.command;return Object(c.jsx)("div",{children:Object(c.jsx)("i",{className:"p-1 fas fas-hover fa-2x rounded-3 "+a,onClick:function(t){e.callback(t,e.tileIndex,s)}})})};var S=function(e){var t,a=/[a-z](-?[0-9.]*)\s(-?[0-9.]*)/gi,s={minx:999,miny:999,maxx:-999,maxy:-999};do{if(t=a.exec(e.path)){var n=parseFloat(t[1]),i=parseFloat(t[2]);n>s.maxx&&(s.maxx=n),n<s.minx&&(s.minx=n),i>s.maxy&&(s.maxy=i),i<s.miny&&(s.miny=i)}}while(t);return Object(c.jsxs)("div",{className:"row border rounded-3 tile "+(e.selection===e.tileIndex&&"selectedTile"),onClick:function(t){e.callback(t,e.tileIndex,"select")},children:[Object(c.jsx)("div",{className:"col-5 d-none d-lg-block",children:Object(c.jsx)("div",{className:"row m-1",children:Object(c.jsx)("svg",{className:"w-100 h-100 p-1 rounded-3",viewBox:"".concat(s.minx-10," ").concat(s.miny-10," ").concat(s.maxx-s.minx+20," ").concat(s.maxy-s.miny+20),fill:"none",children:Object(c.jsx)("path",{d:"".concat(e.path),stroke:"".concat(e.color),strokeWidth:"".concat(e.stroke)})})})}),Object(c.jsxs)("div",{className:"col-lg-7 col-sm-12 col-xs-12 tileContentContainer",children:[Object(c.jsx)("div",{className:"row mt-1 tileTextContainer w-100",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("p",{className:"text-end",children:Object(c.jsxs)("span",{className:"curveName",children:[Object(c.jsx)("span",{className:"curveText",children:"Curve "}),Object(c.jsx)("span",{className:"curveNumber",children:e.name})]})})})})}),Object(c.jsxs)("div",{className:"row mt-2 tileButtonsContainer",children:[Object(c.jsx)("div",{className:"col-12 col-sm-6",children:Object(c.jsx)(M,{type:e.playing?"stop":"play",callback:e.callback,tileIndex:e.tileIndex})}),Object(c.jsx)("div",{className:"col-12 col-sm-6",children:Object(c.jsx)(M,{type:"delete",callback:e.callback,tileIndex:e.tileIndex})})]})]})]})},P=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).state={curveList:[],activeCurve:0},c.updateParameters=c.updateParameters.bind(Object(u.a)(c)),c.addCurve=c.addCurve.bind(Object(u.a)(c)),c.randomCurve=c.randomCurve.bind(Object(u.a)(c)),c.drawSpiro=c.drawSpiro.bind(Object(u.a)(c)),c.handleClick=c.handleClick.bind(Object(u.a)(c)),c.changeCurve=c.changeCurve.bind(Object(u.a)(c)),c.animateCurve=c.animateCurve.bind(Object(u.a)(c)),c.stopAnimation=c.stopAnimation.bind(Object(u.a)(c)),c.deleteCurve=c.deleteCurve.bind(Object(u.a)(c)),c.clearCanvas=c.clearCanvas.bind(Object(u.a)(c)),c.saveCanvas=c.saveCanvas.bind(Object(u.a)(c)),c}return Object(d.a)(a,[{key:"handleClick",value:function(e,t,a){switch(a){case"select":e.target instanceof HTMLDivElement&&this.changeCurve(t);break;case"play":this.animateCurve(t);break;case"stop":this.stopAnimation(t);break;case"delete":this.deleteCurve(t)}}},{key:"animateCurve",value:function(e){var t=this;this.updateParameters("animPlaying",!0);var a=this.state.curveList[e].params.animation,c=document.querySelector(".spiro:nth-child(".concat(e+1,") svg path")),s=c.getTotalLength(),n={strokeDasharray:"".concat(s,"px"),strokeDashoffset:"-".concat(s,"px")},i={strokeDashoffset:0,transition:"stroke-dashoffset ".concat(a,"s linear")};Object.assign(c.style,n),setTimeout((function(){Object.assign(c.style,i)}),200),setTimeout((function(){c.removeAttribute("style"),t.updateParameters("animPlaying",!1)}),1e3*a+200)}},{key:"stopAnimation",value:function(e){document.querySelector(".spiro:nth-child(".concat(e+1,") svg path")).removeAttribute("style"),this.updateParameters("animPlaying",!1)}},{key:"updateParameters",value:function(e,t){var a=Object(l.a)(this.state.curveList),c=a[this.state.activeCurve];"x"===e||"y"===e?c.params[e]+=t:c.params[e]=t,c.path=g(c.params),a[this.state.activeCurve]=c,this.setState((function(e){return{curveList:a}}))}},{key:"addCurve",value:function(){var e=C();this.drawSpiro(e),this.setState((function(e){return{activeCurve:e.curveList.length-1}}))}},{key:"deleteCurve",value:function(e){var t=Object(l.a)(this.state.curveList);t.splice(e,1),this.setState((function(e){return{curveList:t}})),this.changeCurve(null)}},{key:"changeCurve",value:function(e){this.setState((function(t){return{activeCurve:t.activeCurve===e?null:e}}))}},{key:"clearCanvas",value:function(){this.setState((function(e){return{curveList:[]}})),this.changeCurve(null)}},{key:"saveCanvas",value:function(){var e=Object(l.a)(this.state.curveList),t=document.createElement("div"),a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("fill","none"),a.setAttribute("xmlns","http://www.w3.org/2000/svg");var c,s=/[a-z](-?[0-9.]*)\s(-?[0-9.]*)/gi,n={minx:999,miny:999,maxx:-999,maxy:-999};e.forEach((function(e,t){var i=document.querySelector("#canvasContainer .spiro:nth-child(".concat(t+1,") svg path")).cloneNode(!0);a.appendChild(i);do{if(c=s.exec(i.attributes.d.value)){var r=parseFloat(c[1]),l=parseFloat(c[2]);r>n.maxx&&(n.maxx=r),r<n.minx&&(n.minx=r),l>n.maxy&&(n.maxy=l),l<n.miny&&(n.miny=l)}}while(c)})),a.setAttribute("width","".concat(n.maxx-n.minx+200)),a.setAttribute("height","".concat(n.maxy-n.miny+200)),a.setAttribute("viewBox","".concat(n.minx-100," ").concat(n.miny-100," ").concat(n.maxx-n.minx+200," ").concat(n.maxy-n.miny+200)),t.appendChild(a);var i=new Blob([t.innerHTML.toString()]),r=document.createElement("a");r.download="Spirograher Canvas.svg",r.href=window.URL.createObjectURL(i),r.click(),r.remove()}},{key:"randomCurve",value:function(){var e=C(),t=Object(l.a)(this.state.curveList),a=t[this.state.activeCurve];a.params=e,a.path=g(e),t[this.state.activeCurve]=a,this.setState((function(e){return{curveList:t}}))}},{key:"drawSpiro",value:function(e){var t=g(e);this.setState((function(a){return{curveList:[].concat(Object(l.a)(a.curveList),[{params:e,path:t}])}}))}},{key:"componentDidMount",value:function(){var e=C();this.drawSpiro(e)}},{key:"render",value:function(){var e=this,t={r1:0,r2:0,distance:0,rotation:0,ppc:0,animation:5,animPlaying:!1,curveType:"epi",scale:1,color:"#010101",stroke:1,x:0,y:0};return void 0!==this.state.curveList[this.state.activeCurve]&&(t=this.state.curveList[this.state.activeCurve].params),Object(c.jsx)("div",{className:"container-xl vh-100 p-3",children:Object(c.jsxs)("div",{className:"row h-100",children:[Object(c.jsx)("div",{className:"col-2 col-xl-3 order-1 order-sm1",children:Object(c.jsx)("div",{id:"tileContainer",children:this.state.curveList.map((function(t,a){return Object(c.jsx)(S,{name:"".concat(a+1),path:t.path,tileIndex:a,selection:e.state.activeCurve,callback:e.handleClick,playing:t.params.animPlaying,color:t.params.color,stroke:t.params.stroke},a+1)}))})}),Object(c.jsxs)("div",{className:"col-7 col-xl-6 order-2 order-sm-2",children:[Object(c.jsx)("div",{id:"outputContainer",className:"d-none"}),Object(c.jsx)("div",{id:"canvasContainer",className:"border overflow-hidden position-relative h-100",children:this.state.curveList.map((function(t,a){return Object(c.jsx)(w,{path:t.path,selected:e.state.activeCurve+1,active:e.state.activeCurve===a,color:t.params.color,stroke:t.params.stroke,callback:e.updateParameters},a)}))})]}),Object(c.jsxs)("div",{className:"col-sm-3 col-12 order-0 order-sm-3",children:[Object(c.jsxs)("div",{id:"parameterPanel",className:"bg-light row",children:[Object(c.jsx)(j,{type:"r1",callback:this.updateParameters,value:t.r1,disabled:null===this.state.activeCurve}),Object(c.jsx)(j,{type:"r2",callback:this.updateParameters,value:t.r2,disabled:null===this.state.activeCurve}),Object(c.jsx)(j,{type:"distance",callback:this.updateParameters,value:t.distance,disabled:null===this.state.activeCurve}),Object(c.jsx)(j,{type:"scale",callback:this.updateParameters,value:t.scale,disabled:null===this.state.activeCurve}),Object(c.jsx)(y,{type:"curveType",callback:this.updateParameters,value:t.curveType,disabled:null===this.state.activeCurve}),Object(c.jsx)(j,{type:"stroke",callback:this.updateParameters,value:t.stroke,disabled:null===this.state.activeCurve}),Object(c.jsx)(f,{type:"color",callback:this.updateParameters,value:t.color,disabled:null===this.state.activeCurve})]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("a",{href:"#advanced","data-bs-toggle":"collapse","aria-expanded":"false","aria-controls":"multiCollapseExample1",children:"Advanced Settings"}),"            "]}),Object(c.jsx)("div",{id:"advanced",className:"collapse multi-collapse",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(j,{type:"rotation",callback:this.updateParameters,value:t.rotation,disabled:null===this.state.activeCurve}),Object(c.jsx)(j,{type:"ppc",callback:this.updateParameters,value:t.ppc,disabled:null===this.state.activeCurve}),Object(c.jsx)(j,{type:"animation",callback:this.updateParameters,value:t.animation,disabled:null===this.state.activeCurve}),Object(c.jsx)(k,{params:t,type:"GCD"})]})}),Object(c.jsx)("div",{id:"buttonPanel",className:"mt-3",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(b,{buttonType:"randomize",callback:this.randomCurve}),Object(c.jsx)(b,{buttonType:"add",callback:this.addCurve}),Object(c.jsx)(b,{buttonType:"clear",callback:this.clearCanvas}),Object(c.jsx)(b,{buttonType:"save",callback:this.saveCanvas})]})})]})]})})}}]),a}(n.a.Component),T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),T()}},[[19,1,2]]]);
//# sourceMappingURL=main.773e41a1.chunk.js.map